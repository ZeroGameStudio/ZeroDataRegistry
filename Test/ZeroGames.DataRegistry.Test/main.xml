


<Schema Name="Main" Namespace="ZeroGames.DataRegistry.Test">
    
    <Import Uri="shared" Alias="Shared" />
    
    <Entity Name="ItemBase" Namespace="System" Abstract="true">
        <PrimaryKey Type="uint64" Name="Id" />
        <PrimaryKey Type="string" Name="Uri" />
    </Entity>

    <Entity Name="Item" Namespace="System" Extends="ItemBase" Implements="Shared.INameProvider, Shared.IDescProvider">
        <ForeignKey Type="Icon[]" Name="Icons" />
        <Property Type="string[]" Name="Strings" />
        <Property Type="string{}" Name="StringSet" />
        <Property Type="string->int32" Name="AttributeMap" />
        <ForeignKey Type="Icon?" Name="Icon" />
    </Entity>
    
    <Entity Name="Weapon" Namespace="System" Extends="Item">
        <Property Type="Shared.Point2D" Name="AttachPoint" />
        <Property Type="Shared.EDamageType" Name="DamageType" />
        <Property Type="double" Name="Damage" />
    </Entity>

    <Entity Name="Armor" Namespace="System" Extends="Item">
        <Property Type="Shared.Point2D" Name="AttachPoint" />
        <Property Type="double" Name="Defence" />
    </Entity>
    
    <Entity Name="Icon">
        <PrimaryKey Type="uint64" Name="Id" />
        <Property Type="string" Name="Path" />
    </Entity>
    
    <Entity Name="Character">
        <PrimaryKey Type="uint64" Name="Id" />
        <Property Type="OwningItem[]" Name="OwningItems" />
        <ForeignKey Type="Shared.Constant" Name="Const" />
    </Entity>
    
    <Struct Name="OwningItem">
        <ForeignKey Type="Item" Name="Item" />
        <Property Type="int32" Name="Num" />
    </Struct>

</Schema>
